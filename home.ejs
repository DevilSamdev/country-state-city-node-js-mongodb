<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
    <body>
        <div class="container mt-5">
        <div class="row justify-content-center">
        <div class="col-md-10">
        <div class="card">
        <div class="card-header">
        <h2 class="text-info"> Dynamic Dropdown</h2>
        </div>
        <div class="card-body">
        <div class="form-group">
        <label for="country">Country</label>
        <select class="form-control" id="country" name="country">
            <option value="">Select Country</option>
        <% if(dropdownVals.length){
        for(var i = 0; i< dropdownVals.length; i++) {%> 
        <option value="<%= dropdownVals[i].country_code%>">
        <%= dropdownVals[i].country_name%>
        </option>
        <% } } %>
        </select>
    </div>  
    <div class="form-group">
    <label for="state">State</label>
    <select class="form-control" id="state">
    </select>
    </div>                        
    <div class="form-group">
    <label for="city">City</label>
    <select class="form-control" id="city">
    </select>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script >
    $(document).ready(function() {
    $('#country').on('change', function() {
    var country_id = this.value;
    $("#state").html('');
    $.ajax({
    url: "http://localhost:3000/state",
    type: "POST",
    data: {
    country_code: country_id,
    },
    dataType:'json',
   
   
    success: function(result) {
        
         $('#state').html('<option value="">Select State</option>');
            console.log(result)
        $.each(result.states, function(key, value) {
        $("#state").append('<option value="' + value.state_code + '">' + value.state_name + '</option>');
        });
        $('#city').html('<option value="">Select State First</option>');
}
});
});
$('#state').on('change', function() {
var state_id = this.value;
$("#city").html('');
$.ajax({
url: "http://localhost:3000/city",
type: "POST",
data: {
name: 'state',
state_code: state_id,
},
dataType: 'json',
success: function(result) {
    $('#city').html('<option value="">Select City</option>');
$.each(result.cities, function(key, value) {
$("#city").append('<option value="' + value.city_code + '">' + value.city_name + '</option>');
});
}
});
});
});
alert("Dynamic Dropdown") 
</script>
</body>
</html>











<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
    <body>
        <div class="container mt-5">
        <div class="row justify-content-center">
        <div class="col-md-10">
        <div class="card">
        <div class="card-header">
        <h2 class="text-info"> Dynamic Dropdown</h2>
        </div>
        <div class="card-body">
        <div class="form-group">
        <label for="country">Country</label>
        <select class="form-control" id="country" name="country">
            <option value="">Select Country</option>
         
        <option value="AUS">
        Australia
        </option>
         
        <option value="PAk">
        Pakistan
        </option>
         
        <option value="USA">
        America
        </option>
         
        <option value="IN">
        India
        </option>
        
        </select>
    </div>  
    <div class="form-group">
    <label for="state">State</label>
    <select class="form-control" id="state"></select>
    </div>                        
    <div class="form-group">
    <label for="city">City</label>
    <select class="form-control" id="city">
    </select>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
    $('#country').on('change', function() {
    var country_id = this.value;
    $("#state").html('');
    $.ajax({
    url: "http://localhost:3000/state",
    type: "POST",
    data: {
    country_code: country_id,
    },
    dataType:'json',
   
   
    success: function(result) {
         $('#state').html('<option value="">Select State</option>');
        console.log(result)
        $.each(result.states, function(key, value) {
        $("#state").append('<option value="' + value.state_code + '">' + value.state_name + '</option>');
        });
        $('#city').html('<option value="">Select State First</option>');
}
});
});
$('#state').on('change', function() {
var state_id = this.value;
$("#city").html('');
$.ajax({
url: "http://localhost:3000/city",
type: "POST",
data: {
name: 'state',
state_code: state_id,
},
dataType: 'json',
success: function(result) {
    $('#city').html('<option value="">Select City</option>');
$.each(result.cities, function(key, value) {
$("#city").append('<option value="' + value.city_code + '">' + value.city_name + '</option>');
});
}
});
});
});
</script>


</body></html>
